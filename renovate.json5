// Note: we use JSON5 to be able to use comments
{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:base",
    ":disableRateLimiting",
    ":rebaseStalePrs"
  ],
  "github-actions": {
    enabled: false
  },
  baseBranches: [
    "main"
  ],

  regexManagers: [
    {
      fileMatch: ["cf-cli/cf-cli_spec\.rb$"], //https://regex101.com/r/rIOdcZ/1
      matchStrings: [
        "^RUBY_VERSION=(?<currentValue>[a-z0-9\\.\\-]+)$" // https://regex101.com/r/hTyRlz/1
      ],
      depNameTemplate: "_/ruby",
      datasourceTemplate: "docker",
    },
//    {
//      "fileMatch": ["shared-operators/docker-images/docker-images-versions-vars\\.yml$"],
//      "matchStrings": [
//        "(?<depName>[a-z0-9/\\-_]*?): \"(?<currentValue>[a-z0-9\\.\\-]*?)\"\\nn"
//      ],
//      "datasourceTemplate": "docker",
//      "versioningTemplate": "docker"
//    },
    // https://docs.renovatebot.com/release-notes-for-major-versions/#breaking-changes
    // datasource/github-releases: Regex Manager configurations relying on the github-release data-source with digests will have different digest semantics. The digest will now always correspond to the underlying Git SHA of the release/version. The old behavior can be preserved by switching to the github-release-attachments datasource
//    {
//      fileMatch: [".*/Dockerfile$", ".*/.*_spec\\.rb"],
//      "matchStrings": [
//        // For dockerfile: https://regex101.com/r/QUjPL3/3
//        "datasource=(?<datasource>.+) depName=(?<depName>[\\w\\d\\//\\-\\_]+)\\nENV .+_VERSION ?\\\"?(?<currentValue>[\\w\\d\\/\\-\\.\\_]+)\\\"?\\s*",
//        // For spec files: https://regex101.com/r/ifWHDK/2
//        "^.+_VERSION\\s*=\\s*[\\\"\\']?(?<currentValue>[\\w\\d\\/\\-\\.\\_]+)?[\\\"\\']?\\s* #\\s*renovate: datasource=(?<datasource>.+) depName=(?<depName>[\\w\\d\\//\\-\\_]+)( versioning=(?<versioning>.+))?\\s*"
//      ],
//      datasourceTemplate: "github-releases",
//      versioningTemplate: "regex:(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$",
//      extractVersionTemplate: "^v?(?<version>.*)$"
//    }
  ]
}



