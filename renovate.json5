{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  extends: [
    'config:best-practices',
    ':disableRateLimiting',
  ],
  'github-actions': {
    enabled: false,
  },
  bundler: {
    enabled: false,
  },
  baseBranches: [
    'main',
  ],
  ignorePaths: [
    'terraform/**',
    'certstrap/**',
    'cf-acceptance-tests/**',
    'cf-uaac/**',
    'concourse-keyval-resource/**',
    'concourse-pool-resource/**',
    'fast-startup-and-shutdown/**',
    'golang/**',
    'json-minify/**',
    'keyval-resource/**',
    'middleman/**',
    'node/**',
    'node-chromium/**',
    'olhtbr-metadata-resource/**',
    'paas-prometheus-exporter/**',
    'psql/**',
    'ruby/**',
    'ruby-base/**',
    'self-update-pipelines/**',
    'spec/**',
    'ubuntu/**',
  ],
  packageRules: [
    {
      description: '@o-orand assignments',
      matchPackagePatterns: [
        '*',
      ],
      assignees: [
        'o-orand',
      ],
    },
    {
      description: 'Add common labels',
      matchDepPatterns: [
        '*',
      ],
      addLabels: [
        'datasource/{{datasource}}',
        'depName/{{depNameSanitized}}',
        'manager/{{manager}}',
      ],
    },
    {
      description: 'Ruby: update spec files',
      matchDepNames: 'ruby',
      matchFileNames: [
        '**/*_spec\\.rb',
      ],
    },
    {
      matchDepNames: 'kubernetes/kubectl',
      separateMultipleMinor: true,
    },
    {
      matchDepNames: 'mikefarah/yq',
      prBodyNotes: [
        'To easily extract checksums: curl -sSL https://github.com/mikefarah/yq/releases/download/v{{version}}/checksums |grep "yq_linux_amd64 "|cut -d\' \' -f37',
      ],
    },
    {
      matchDepNames: [
        'mikefarah/yq',
        'k14s/ytt',
        'k14s/kapp',
        'kudobuilder/kuttl',
      ],
      description: 'Group k8s related clis bump unless it is a major version',
      groupName: 'K8s related bumps',
      matchUpdateTypes: [
        'patch',
        'minor',
      ],
    },
    {
      matchDepNames: [
        'cloudfoundry/credhub-cli',
        'cloudfoundry/cli',
      ],
      description: 'Group cloudfoundry org clis patch bump',
      groupName: 'CF org bumps',
      matchUpdateTypes: [
        'patch',
      ],
    },
  ],
  schedule: [
    'after 1pm on Monday',
    'before 4pm on Monday',
  ],
  customManagers: [
    {
      customType: 'regex',
      fileMatch: [
        '.*/.*_spec\\.rb',
      ],
      matchStrings: [
        '\\s*RUBY_VERSION\\s*=\\s*"(?<currentValue>[a-z0-9\\.\\/\\-\\+]*)".*',
      ],
      depNameTemplate: 'ruby',
      datasourceTemplate: 'docker',
    },
    {
      customType: 'regex',
      fileMatch: [
        '.*/Dockerfile$',
        '.*/.*_spec\\.rb',
      ],
      matchStrings: [
        'datasource=(?<datasource>github-tags) depName=(?<depName>kubernetes/kubectl)\\nENV .+_VERSION ?\\"?(?<currentValue>[\\w\\d\\/\\-\\.\\_]+)\\"?\\s*',
        '.+_VERSION\\s*=\\s*[\\"\\\']?(?<currentValue>[\\w\\d\\/\\-\\.\\_]+)?[\\"\\\']?\\s* #\\s*renovate: datasource=(?<datasource>github-tags) depName=(?<depName>kubernetes/kubectl)( versioning=(?<versioning>.+))?\\s*',
      ],
      extractVersionTemplate: '^(kubernetes-)?v?(?<version>.*)$',
    },
    {
      customType: 'regex',
      fileMatch: [
        '.*/Dockerfile$',
        '.*/.*_spec\\.rb',
      ],
      matchStrings: [
        'datasource=(?<datasource>github-releases) depName=(?<depName>[\\w\\d\\//\\-\\_]+)\\nENV .+_VERSION ?\\"?(?<currentValue>[\\w\\d\\/\\-\\.\\_]+)\\"?\\s*',
        '.+_VERSION\\s*=\\s*[\\"\\\']?(?<currentValue>[\\w\\d\\/\\-\\.\\_]+)?[\\"\\\']?\\s* #\\s*renovate: datasource=(?<datasource>github-releases) depName=(?<depName>[\\w\\d\\//\\-\\_]+)( versioning=(?<versioning>.+))?\\s*',
      ],
      versioningTemplate: 'regex:(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$',
      extractVersionTemplate: '^v?(?<version>.*)$',
    },
  ],
}
